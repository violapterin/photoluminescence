<main class="document">
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">June 10, 2021:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Interpretation of the generation of “Photoluminescence” succeeded!</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Different CSS classes accounted for normal, italic, bold texts.</span></span> <span class="phrase"><span class="serif-roman">I could also set up indentation, alignment, separating line, and colored background for category names.</span></span> <span class="phrase"><span class="serif-roman">As for the font, I use Alegreya and the accompanying Alegreya Sans, since I was rather fascinated by its somewhat old-fashioned but fancy strokes.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">The image links in the footer for social media was more difficult to achieve.</span></span> <span class="phrase"><span class="serif-roman">A solution is the CSS background rule,</span> <span class="serif-roman">and we had to remember to adjust its width and height to avoid unwanted blank space.</span></span>
</p>
</div>
<div class="stanza">
<p class="line">
<span class="verse"><code class="mono">.icon-gmail {</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">background: url(&quot;/asset/icon-gmail.<wbr>png&quot;) no-repeat;</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">display: inline-block;</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">background-size: contain;</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">}</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">June 15:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">As an easter egg, the quote in the footer was to be chosen randomly by a script.</span></span> <span class="phrase"><span class="serif-roman">Suppose the quote element had ID</span> <code class="mono">#quote</code><span class="serif-roman">,</span> <span class="serif-roman">then the following script would do the job.</span></span>
</p>
</div>
<div class="stanza">
<p class="line">
<span class="verse"><code class="mono">var texts= [`The first quote`, `The second quote`, `The third quote`];</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">var choice = Math.floor(Math.random() * texts.length);</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">document.getElementById(<wbr>&quot;quote&quot;).innerHTML = texts[choice];</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">June 16:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">CSS colors could be called by semantic names, like</span> <code class="mono">mediumaquamarine</code> <span class="serif-roman">and</span> <code class="mono">midnightblue</code><span class="serif-roman">,</span> <span class="serif-roman">which was a lot more readable than HEX color codes.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">June 17:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Enhanced responsive design.</span></span> <span class="phrase"><span class="serif-roman">I learnt that font sizes, among other things, could be adapted with respect to the screen width, as shown in the code below.</span></span>
</p>
</div>
<div class="stanza">
<p class="line">
<span class="verse"><code class="mono">body { font-size: 24px; }</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">@media screen and (max-width: 600px) {</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">body { font-size: 20px; }</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">}</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">@media screen and (max-width: 400px) {</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">body { font-size: 16px; }</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">}</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">July 4:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">While the Mathjax 3 documentation isn’t yet very refined, it is instructive now to copy what configuration worked for me.</span></span> <span class="phrase"><span class="serif-roman">We could choose to render math in SVG, which is saved in image, or CHTML, which calls web fonts.</span></span> <span class="phrase"><span class="serif-roman">Moreover, we could specify precisely those CSS classes in which Mathjax is called.</span></span>
</p>
</div>
<div class="stanza">
<p class="line">
<span class="verse"><code class="mono">MathJax = {</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">loader: {</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse">&ensp;</span> <span class="verse"><code class="mono">load: [&#39;input/tex&#39;, &#39;output/svg&#39;]</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">},</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">tex: {</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse">&ensp;</span> <span class="verse"><code class="mono">inlineMath: [[&#39;\\(&#39;, &#39;\\)&#39;]],</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse">&ensp;</span> <span class="verse"><code class="mono">displayMath: [[&#39;\\[&#39;, &#39;\\]&#39;]]</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">},</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">options: {</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse">&ensp;</span> <span class="verse"><code class="mono">processHtmlClass: [&quot;math&quot;],</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse">&ensp;</span> <span class="verse"><code class="mono">ignoreHtmlClass: [&quot;body&quot;]</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span> <span class="verse"><code class="mono">}</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">};</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">July 6:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Previously, I decided to break math expressions into individual spans when parsing them, since Mathjax 3 had no word break.</span></span> <span class="phrase"><span class="serif-roman">The spacing wasn’t quite right.</span></span> <span class="phrase"><span class="serif-roman">My workaround was to add</span> <code class="mono">\,</code><span class="serif-roman">,</span> <code class="mono">\:</code><span class="serif-roman">,</span> <span class="serif-roman">and</span> <code class="mono">\;</code><span class="serif-roman">,</span> <span class="serif-roman">in the LaTeX source, and to remove whitespace between these spans.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">July 27:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Numbered all posts with respect to the stamp.</span></span> <span class="phrase"><span class="serif-roman">It simply amounted to copy the list of posts, and add a counter in each title.</span></span> <span class="phrase"><span class="serif-roman">Now the slowly increasing numbering made me proud.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">July 28:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">The original profile and the banner picture has oxygen to be blue, and nitrogen red.</span></span> <span class="phrase"><span class="serif-roman">Leyi told me that according to CPK coloring, which is a chemistry standard, oxygen should be red, and nitrogen blue.</span></span> <span class="phrase"><span class="serif-roman">I redrew the profile following such coloring,</span> <span class="serif-roman">and redesigned the banner picture altogether.</span></span> <span class="phrase"><span class="serif-roman">Now on the banner were mostly colored, aromatic chemicals, hinting the title “Photoluminescence”.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">July 28:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Word break had been a serious problem in web designing.</span></span> <span class="phrase"><span class="serif-roman">It was the tradition in typography to justify text,</span> <span class="serif-roman">but it was generally discouraged to do so in web programming.</span></span> <span class="phrase"><span class="serif-roman">The reason is that web browsers couldn’t reliably break words in real time,</span> <span class="serif-roman">and if we insist justification of text, spaces could be too big.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">After a long thought, I maintained to justify, as I really liked the lofty look of a justified text.</span></span> <span class="phrase"><span class="serif-roman">To alleviate the problem, I used a media query to switch to left alignment when the screen is less than 600 px.</span></span> <span class="phrase"><span class="serif-roman">Furthermore, word breaking opportunity,</span> <code class="mono">&lt;wbr&gt;</code><span class="serif-roman">,</span> <span class="serif-roman">would be inserted.</span></span> <span class="phrase"><span class="serif-roman">To do so for text, we could single out a word, and broke at punctuations whenever possible;</span> <span class="serif-roman">if not possible, we broke at vowels;</span> <span class="serif-roman">if not possible either, we simply broke at the middle of the word.</span></span> <span class="phrase"><span class="serif-roman">Do the same for code, except for breaking at alphabets.</span></span> <span class="phrase"><span class="serif-roman">We could look up a list of characters, at which words might be broken, ordered in decreasing priority.</span></span> <span class="phrase"><span class="serif-roman">For instance, it was better to break at period</span> <code class="mono">.</code> <span class="serif-roman">than at hyphen</span> <code class="mono">-</code><span class="serif-roman">.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">July 28:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">With the library Selenium in Python, it was possible to automatically take screenshots calling a headless Firefox, making it effortless to save double-backup of posts on my site.</span></span> <span class="phrase"><span class="serif-roman">It could even take a full-page screenshot, by identifying the</span> <code class="mono">main</code> <span class="serif-roman">class in my case.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">The binary data of the image could be either saved or passed to other function, like the library Pillow.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Somehow, I couldn’t call Chrome;</span> <span class="serif-roman">there was perhaps some problems with path or version.</span></span> <span class="phrase"><span class="serif-roman">Besides, to get a screenshot of higher resolution, we had to zoom in,</span> <span class="serif-roman">but by far I didn’t manage to do that either.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">In addition, Chinese characters should be shown in Noto Serif,</span> <span class="serif-roman">but the result was in a sans font,</span> <span class="serif-roman">and I can’t tell whether it was Noto Sans or a default font in Windows.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Another problem was that sometimes Selenium timed out, or even failed to locate the ID for the post header, for just certain posts, which was strange.</span></span> <span class="phrase"><span class="serif-roman">I therefore enclosed both the post header and the post content in a div given a class for Selenium to recognize, which greatly improved stability.</span></span>
</p>
</div>
<div class="stanza">
<p class="line">
<span class="verse"><code class="mono">#! /usr/bin/env python3</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">import os</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">import io</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">from selenium.webdriver import Firefox</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">from PIL import Image</code></span>
</p>
<p class="line">
<span class="verse">&ensp;</span>
</p>
<p class="line">
<span class="verse"><code class="mono">address = &quot;https://www.<wbr>violapterin.com/&quot;</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">os.environ[<wbr>&quot;MOZ_HEADLESS&quot;] = &quot;1&quot;</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">driver = Firefox()</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">driver.get(address)</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">element = driver.find_element_by_tag_name(<wbr>&quot;body&quot;)</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">binary = element.screenshot_as_png</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">driver.quit()</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">graph = Image.open(io.BytesIO(binary))</code></span>
</p>
<p class="line">
<span class="verse"><code class="mono">graph.save(<wbr>&quot;./homepage.png&quot;)</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><em class="serif-italic">July 28:</em></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">I was a bloody underrated, world-class genius!</span></span> <span class="phrase"><span class="serif-roman">I was now able to make a PDF of all blog posts crawled as image.</span></span> <span class="phrase"><span class="serif-roman">Presently there were about 40 posts,</span> <span class="serif-roman">and the PDF was already almost 100 page long.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">First, as said above, I automatically saved images of blog posts by Selenium.</span></span> <span class="phrase"><span class="serif-roman">The text appeared blurry,</span> <span class="serif-roman">but Pillow could enhance its contrast and sharpness.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Second, I sliced pictures line by line, saved to dedicated directories named by date.</span></span> <span class="phrase"><span class="serif-roman">To let Pillow recognize the cuts, if you noticed, I even added yellow borders to displayed lines and green borders to table rows, all slightly broken with CSS margin.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Third, I patched the slices greedily into pages.</span></span> <span class="phrase"><span class="serif-roman">Once the present total height exceeded the page height, I created a new page.</span></span> <span class="phrase"><span class="serif-roman">When every post ends, I inserted a separation line, and started patching another post.</span></span> <span class="phrase"><span class="serif-roman">Pillow would extend each page with suitable margin.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Fourth, I called ImageMagick via Bash, to convert the pages properly numbered in alphabetical order, into a single PDF.</span></span>
</p>
</div>
<div class="break">
<span class="phrase">&emsp;</span> <span class="phrase">❦</span> <span class="phrase">&emsp;</span> <span class="phrase">❦</span> <span class="phrase">&emsp;</span> <span class="phrase">❦</span>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">❧</span> <em class="serif-italic">started July 2, 2021</em></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><b class="serif-bold">References</b></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">❉</span> <span class="serif-roman">MDN Web Docs,</span> <a class="serif-roman" href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">‹Colors›</a></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">❉</span> <span class="serif-roman">MDN Web Docs,</span> <a class="serif-roman" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity">‹Specificity›</a></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">❉</span> <span class="serif-roman">World Wide Web Consortium,</span> <a class="serif-roman" href="https://validator.w3.org">‹Markup Validation Service›</a></span>
</p>
</div>
</main>